const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CEP-Vprv.js","assets/vendor-ui-DU6d414p.js","assets/vendor-react-_g6xLlVr.js","assets/vendor-motion-Ugh03Kvv.js","assets/index-o-4WMQef.css"])))=>i.map(i=>d[i]);
import{_ as n}from"./index-CEP-Vprv.js";import"./vendor-ui-DU6d414p.js";import"./vendor-react-_g6xLlVr.js";import"./vendor-motion-Ugh03Kvv.js";function e(n){const{step1:e,step2:a,step3:s,step4:r,step5:t,step6:l}=n;return`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 800px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #3B4CC0 0%, #2A3A9F 100%); color: white; padding: 30px; text-align: center; border-radius: 8px 8px 0 0; }\n    .section { background: #f9f9f9; padding: 20px; margin: 20px 0; border-radius: 8px; border-left: 4px solid #3B4CC0; }\n    .section h2 { color: #3B4CC0; margin-top: 0; font-size: 18px; }\n    .row { display: flex; margin: 10px 0; }\n    .label { font-weight: bold; min-width: 200px; color: #555; }\n    .value { color: #333; }\n    .footer { background: #333; color: white; padding: 20px; text-align: center; border-radius: 0 0 8px 8px; margin-top: 20px; }\n    .badge { display: inline-block; background: #4CAF50; color: white; padding: 4px 12px; border-radius: 12px; font-size: 12px; margin-left: 10px; }\n    .files { background: #e8f5e9; padding: 15px; border-radius: 6px; margin-top: 10px; }\n    .file-item { padding: 8px; background: white; margin: 5px 0; border-radius: 4px; border: 1px solid #ddd; }\n  </style>\n</head>\n<body>\n  <div class="container">\n    <div class="header">\n      <h1 style="margin: 0;">ğŸ¯ Neue Banner-Bestellung</h1>\n      <p style="margin: 10px 0 0 0; opacity: 0.9;">S&S Messebau GbR</p>\n    </div>\n\n    <div class="section">\n      <h2>ğŸ“‹ Kunde & Kontakt</h2>\n      <div class="row">\n        <div class="label">Firma:</div>\n        <div class="value">${l.firmaKontakt}</div>\n      </div>\n      <div class="row">\n        <div class="label">Ansprechpartner:</div>\n        <div class="value">${l.ansprechpartner}</div>\n      </div>\n      <div class="row">\n        <div class="label">E-Mail:</div>\n        <div class="value"><a href="mailto:${l.email}">${l.email}</a></div>\n      </div>\n      <div class="row">\n        <div class="label">Telefon:</div>\n        <div class="value"><a href="tel:${l.telefon}">${l.telefon}</a></div>\n      </div>\n      ${l.ustId?`\n      <div class="row">\n        <div class="label">USt-ID:</div>\n        <div class="value">${l.ustId}</div>\n      </div>`:""}\n    </div>\n\n    <div class="section">\n      <h2>ğŸ“¦ Bestellung - Einsatz & System</h2>\n      <div class="row">\n        <div class="label">Einsatzort:</div>\n        <div class="value">${e.einsatzort}</div>\n      </div>\n      <div class="row">\n        <div class="label">Rahmenart:</div>\n        <div class="value">${i(e.rahmenart)}</div>\n      </div>\n      <div class="row">\n        <div class="label">Menge:</div>\n        <div class="value">${e.menge} StÃ¼ck</div>\n      </div>\n      <div class="row">\n        <div class="label">Indoor/Outdoor:</div>\n        <div class="value">${"indoor"===e.indoorOutdoor?"ğŸ¢ Indoor":"ğŸŒ¤ï¸ Outdoor"}</div>\n      </div>\n      ${e.montage?`\n      <div class="row">\n        <div class="label">Montage:</div>\n        <div class="value">âœ… Ja ${e.montageOrt?`- Ort: ${e.montageOrt}`:""} ${e.montageZeitraum?`(${e.montageZeitraum})`:""}</div>\n      </div>`:""}\n    </div>\n\n    <div class="section">\n      <h2>ğŸ“ MaÃŸe & AusfÃ¼hrung</h2>\n      <div class="row">\n        <div class="label">Abmessungen:</div>\n        <div class="value"><strong>${a.breite} Ã— ${a.hoehe} mm</strong></div>\n      </div>\n      <div class="row">\n        <div class="label">Profil:</div>\n        <div class="value">${c=a.profil,{standard:"Standard",premium:"Premium",sonder:"Sonder"}[c]||c}</div>\n      </div>\n      <div class="row">\n        <div class="label">Ecken:</div>\n        <div class="value">${"gehrung"===a.ecken?"Gehrung":"Verbinder"}</div>\n      </div>\n      <div class="row">\n        <div class="label">Seitigkeit:</div>\n        <div class="value">${"einseitig"===a.seitigkeit?"Einseitig":"Zweiseitig"}</div>\n      </div>\n      ${a.led?`\n      <div class="row">\n        <div class="label">LED/Backlit:</div>\n        <div class="value">ğŸ’¡ Ja ${a.ledStrom?`- ${a.ledStrom}`:""} ${a.ledEinsatz?`(${a.ledEinsatz})`:""}</div>\n      </div>`:""}\n    </div>\n\n    <div class="section">\n      <h2>ğŸ–¨ï¸ Banner & Druck</h2>\n      ${s.bannerBenoetigt?`\n      <div class="row">\n        <div class="label">Banner benÃ¶tigt:</div>\n        <div class="value">âœ… Ja</div>\n      </div>\n      ${s.material?`\n      <div class="row">\n        <div class="label">Material:</div>\n        <div class="value">${o=s.material,{frontlit:"Frontlit (Standard)",blockout:"Blockout",backlit:"Backlit"}[o]||o}</div>\n      </div>`:""}\n      ${s.konfektion&&s.konfektion.length>0?`\n      <div class="row">\n        <div class="label">Konfektion:</div>\n        <div class="value">${s.konfektion.join(", ")}</div>\n      </div>`:""}\n      ${s.brandschutz?'\n      <div class="row">\n        <div class="label">Brandschutz:</div>\n        <div class="value"><span class="badge">B1 zertifiziert</span></div>\n      </div>':""}\n      ${s.druckqualitaet?`\n      <div class="row">\n        <div class="label">DruckqualitÃ¤t:</div>\n        <div class="value">${"high"===s.druckqualitaet?"High Quality":"Standard"}</div>\n      </div>`:""}\n      `:'\n      <div class="row">\n        <div class="label">Banner benÃ¶tigt:</div>\n        <div class="value">âŒ Nein</div>\n      </div>\n      '}\n    </div>\n\n    <div class="section">\n      <h2>ğŸ“ Druckdaten & Upload</h2>\n      ${r.druckdatenVorhanden?`\n      <div class="row">\n        <div class="label">Druckdaten:</div>\n        <div class="value">âœ… Vorhanden</div>\n      </div>\n      ${r.serializedFiles&&r.serializedFiles.length>0?`\n      <div class="files">\n        <strong>Hochgeladene Dateien (${r.serializedFiles.length}):</strong>\n        ${r.serializedFiles.map(n=>`\n          <div class="file-item">\n            ğŸ“ <strong>${n.name}</strong> - ${function(n){if(0===n)return"0 Bytes";const e=1024,i=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(n)/Math.log(e));return Math.round(n/Math.pow(e,a)*100)/100+" "+i[a]}(n.size)}\n            <br><small style="color: #666;">Typ: ${n.type}</small>\n          </div>\n        `).join("")}\n      </div>\n      `:'<p style="color: #666; margin-top: 10px;">â„¹ï¸ Keine Dateien hochgeladen</p>'}\n      `:`\n      <div class="row">\n        <div class="label">Druckdaten:</div>\n        <div class="value">âŒ Noch nicht vorhanden</div>\n      </div>\n      ${r.grafikservice?`\n      <div class="row">\n        <div class="label">Grafikservice:</div>\n        <div class="value">âœ… GewÃ¼nscht</div>\n      </div>\n      ${r.designwunsch?`\n      <div class="row">\n        <div class="label">Designwunsch:</div>\n        <div class="value">${r.designwunsch}</div>\n      </div>`:""}\n      `:""}\n      `}\n      ${r.kommentar?`\n      <div class="row">\n        <div class="label">Kommentar:</div>\n        <div class="value" style="white-space: pre-wrap;">${r.kommentar}</div>\n      </div>`:""}\n    </div>\n\n    <div class="section">\n      <h2>ğŸšš Lieferung & Termin</h2>\n      <div class="row">\n        <div class="label">Lieferadresse:</div>\n        <div class="value">\n          ${t.firma}<br>\n          ${t.strasse}<br>\n          ${t.plz} ${t.ort}<br>\n          ${t.land}\n        </div>\n      </div>\n      ${t.wunschDatum?`\n      <div class="row">\n        <div class="label">Wunschlieferdatum:</div>\n        <div class="value">ğŸ“… ${new Date(t.wunschDatum).toLocaleDateString("de-DE")}</div>\n      </div>`:""}\n      <div class="row">\n        <div class="label">Lieferart:</div>\n        <div class="value">${d=t.lieferart,{spedition:"ğŸš› Spedition",abholung:"ğŸª Abholung",kurier:"ğŸƒ Kurier"}[d]||d} ${t.express?'<span class="badge">EXPRESS</span>':""}</div>\n      </div>\n      ${t.zeitfenster?`\n      <div class="row">\n        <div class="label">Zeitfenster:</div>\n        <div class="value">${t.zeitfenster}</div>\n      </div>`:""}\n    </div>\n\n    <div class="footer">\n      <p style="margin: 0 0 10px 0;"><strong>S&S Messebau GbR</strong></p>\n      <p style="margin: 0; font-size: 14px; opacity: 0.9;">\n        MarienstraÃŸe 37 | 41836 HÃ¼ckelhoven<br>\n        Mobil: +49 1514 0368754<br>\n        E-Mail: info@sundsmessebau.com\n      </p>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim();var d,o,c}function i(n){return{haengerahmen:"HÃ¤ngerahmen",standrahmen:"Standrahmen",verkleidungsrahmen:"Verkleidungsrahmen"}[n]||n}async function a(a){try{const{config:t,configId:l,sendImmediately:d=!1}=a,o=`Neue Banner-Bestellung: ${t.step6.firmaKontakt} - ${t.step1.menge}x ${i(t.step1.rahmenart)}`,c=e(t),v=function(n,e){return`\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="UTF-8">\n  <style>\n    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n    .header { background: linear-gradient(135deg, #3B4CC0 0%, #2A3A9F 100%); color: white; padding: 30px; text-align: center; border-radius: 8px 8px 0 0; }\n    .content { background: white; padding: 30px; border: 1px solid #e0e0e0; }\n    .box { background: #f5f7fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3B4CC0; }\n    .footer { background: #333; color: white; padding: 20px; text-align: center; border-radius: 0 0 8px 8px; }\n    .button { display: inline-block; background: #4CAF50; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; margin: 20px 0; }\n    h2 { color: #3B4CC0; margin-top: 0; }\n  </style>\n</head>\n<body>\n  <div class="container">\n    <div class="header">\n      <h1 style="margin: 0;">âœ… Bestellung eingegangen!</h1>\n      <p style="margin: 10px 0 0 0; opacity: 0.9;">Vielen Dank fÃ¼r Ihre Anfrage</p>\n    </div>\n    \n    <div class="content">\n      <p>Sehr geehrte/r ${n.step6.ansprechpartner},</p>\n      \n      <p>vielen Dank fÃ¼r Ihre Banner-Bestellung bei S&S Messebau GbR!</p>\n      \n      <p>Wir haben Ihre Konfiguration erfolgreich erhalten und werden uns <strong>innerhalb von 24 Stunden</strong> mit einem individuellen Angebot bei Ihnen melden.</p>\n      \n      <div class="box">\n        <h2>ğŸ“‹ Ihre Bestellung im Ãœberblick</h2>\n        <p><strong>Bestellnummer:</strong> #${e.slice(-8)}</p>\n        <p><strong>Rahmenart:</strong> ${i(n.step1.rahmenart)}</p>\n        <p><strong>Menge:</strong> ${n.step1.menge} StÃ¼ck</p>\n        <p><strong>MaÃŸe:</strong> ${n.step2.breite} Ã— ${n.step2.hoehe} mm</p>\n        ${n.step5.wunschDatum?`<p><strong>Wunschlieferung:</strong> ${new Date(n.step5.wunschDatum).toLocaleDateString("de-DE")}</p>`:""}\n      </div>\n      \n      <h2>ğŸš€ Wie geht es weiter?</h2>\n      <ol>\n        <li><strong>PrÃ¼fung:</strong> Wir prÃ¼fen Ihre Anfrage und alle Anforderungen</li>\n        <li><strong>Angebot:</strong> Sie erhalten ein detailliertes Angebot mit Festpreisen</li>\n        <li><strong>Produktion:</strong> Nach Ihrer Freigabe starten wir die Fertigung</li>\n        <li><strong>Lieferung:</strong> PÃ¼nktliche Lieferung zum Wunschtermin</li>\n      </ol>\n      \n      <p>Bei RÃ¼ckfragen stehen wir Ihnen jederzeit zur VerfÃ¼gung!</p>\n      \n      <p style="margin-top: 30px;">\n        Mit freundlichen GrÃ¼ÃŸen<br>\n        <strong>Ihr S&S Messebau Team</strong>\n      </p>\n    </div>\n    \n    <div class="footer">\n      <p style="margin: 0 0 10px 0;"><strong>S&S Messebau GbR</strong></p>\n      <p style="margin: 0; font-size: 14px; opacity: 0.9;">\n        MarienstraÃŸe 37 | 41836 HÃ¼ckelhoven<br>\n        Mobil: +49 1514 0368754<br>\n        E-Mail: info@sundsmessebau.com\n      </p>\n    </div>\n  </div>\n</body>\n</html>\n  `.trim()}(t,l),u=t.step4.serializedFiles&&t.step4.serializedFiles.length>0?`\n\nğŸ“ AnhÃ¤nge: ${t.step4.serializedFiles.length} Datei(en) (${t.step4.serializedFiles.map(n=>n.name).join(", ")})`:"",g={to:"info@sundsmessebau.com",subject:o,htmlBody:c,textBody:s(c)+u,customerEmail:t.step6.email,customerSubject:`AuftragsbestÃ¤tigung: Banner-Bestellung #${l.slice(-8)}`,customerHtmlBody:v,customerTextBody:s(v),attachments:t.step4.serializedFiles||[],configId:l,timestamp:(new Date).toISOString(),sent:!1},p=`email_queue_${l}`;try{const{emailApi:e}=await n(async()=>{const{emailApi:n}=await import("./index-CEP-Vprv.js").then(n=>n.ai);return{emailApi:n}},__vite__mapDeps([0,1,2,3,4]));await e.enqueue({queue_id:p,to_email:g.to,subject:g.subject,html_body:g.htmlBody,text_body:g.textBody,customer_email:g.customerEmail,customer_subject:g.customerSubject,customer_html_body:g.customerHtmlBody,customer_text_body:g.customerTextBody,attachments:g.attachments,order_id:l})}catch(r){console.warn("Failed to enqueue via API, using localStorage fallback:",r),await window.spark.kv.set(p,g)}return{success:!0,queueId:p}}catch(t){console.error("âŒ Fehler beim E-Mail-Versand:",t);return{success:!1,error:t instanceof Error?t.message:"Unbekannter Fehler"}}}function s(n){return n.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").replace(/<br\s*\/?>/gi,"\n").replace(/<\/div>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<\/h[1-6]>/gi,"\n\n").replace(/<[^>]+>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\n\s*\n\s*\n/g,"\n\n").trim()}export{a as sendOrderConfirmationEmail};
